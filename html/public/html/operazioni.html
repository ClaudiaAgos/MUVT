<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>
  <style>
   
    label {
      display: inline-block;
      width: 140px;
      text-align: left;
      margin-bottom: 5px;
        }
    
  </style>
  <body>
    <div class="container">
      <h1>AGGIUNGI CLIENTE</h1>
      <form id="myform" method="POST" action="/insertCliente">
        <label>Username:</label><input type="text" name="username" required />
        <br />
        <label>Password:</label
        ><input type="password" name="password" required />
        <br />
        <label>Ruolo:</label><input type="text" name="ruolo" required />
        <br />

        <input type="submit" value="Aggiungi" />
      </form>
      <hr />
      <h1>RIMUOVI CLIENTE</h1>

      <br />
      <form id="myform" method="POST" action="/deleteCliente">
        <label>Username:</label><input type="text" name="username" required />
        <br />
        <label>Password:</label
        ><input type="password" name="password" required />
        <br />
        <label>Ruolo:</label><input type="text" name="ruolo" required />
        <br />
        <input type="submit" value="Rimuovi" />
      </form>
      <hr />

      <h1>MODIFICA DATI CLIENTE</h1>

      <br />
      <form id="myform" method="post" action="/updateCliente">
        <label>Username:</label> <input type="text" name="username" required />
        <br />
        <label>Ruolo:</label><input type="text" name="ruolo" required />
        <br />
        <h3>NUOVI DATI</h3>
        <label
          >Username:</label><input type="text" name="usernameNew" required
        />
        <br />
        <label>Ruolo:</label><input type="text" name="ruoloNew" required />
        <br />

        <input type="submit" value="Modifica" />
      </form>

      <br />
      <hr />

      <h1>MODIFICA OGGETO</h1>

      <br />
      <form id="myform" method="post" action="/testUpdate">
        <label>Mezzo:</label><input type="text" name="mezzo" required />
        <br />
        <label
          >Condizione:</label><input type="text" name="condizione" required />        <br />
        <label>Modello:</label><input type="text" name="modello" required />        <br />
        <label>Prezzo:</label><input type="text" name="prezzo" required /><br />
        <label>Tipo:</label><input type="text" name="tipo" required /><br />
        <br />
        <h3>NUOVI DATI</h3>
        <label>Mezzo:</label><input type="text" name="mezzoN" required />
        <br />
        <label
          >Condizione:</label><input type="text" name="condizioneN" required />        <br />
        <label>Modello:</label><input type="text" name="modelloN" required />        <br />
        <label>Prezzo:</label><input type="text" name="prezzoN" required />        <br />
        <label>Tipo:</label><input type="text" name="tipoN" required /><br />
        <label
          >Disponibilità:</label><input type="checkbox" name="available" required
        /></label>
        <br />

        <input type="submit" value="Modifica" />
      </form>
      <hr />
      

      <h1>Noleggia o prenota</h1>
      <h3>Il noleggio si limita al giorno stesso, la prenotazione per i giorni futuri.
      
      </h3>

    <form method="POST" action="/insertdate" name="prova">

      <label>Bici:</label><input type="text" name="bici" required />
      <br>
      <label for="start">Inizio del noleggio </label>
      <input type="datetime-local" id="start" name="start">
      <br />
      <label for="end">Fine del noleggio </label>
      <input type="datetime-local" id="end" name="end">
      <br>
      <label for="disp"> Disponibiltà </label>
      <input type="radio" id="disp" name="disp">
      <br />
      <input type="button" value="Aggiungi" onclick="valida()"/>
      
      
    </form>
<br>
    <form method="POST" action="/db/stampaPrenotazioni">
    <button type="submit">Prenota</button>
  </form>
  <br>
  <form method="POST" action="/insertNoleggio">
    <button type="submit">Noleggia</button>
  </form>

  <br>

    <h1>Prova per la ricerca di un oggetto con il calendario </h1>
    <form method="GET" action="/db/stampadate" id="search">
      <div>
          <label for="inizio">Inizio del noleggio </label>
          <input type="datetime-local" id="inizio" name="inizio">
          <br>
          <label for="end">Fine del noleggio </label>
          <input type="datetime-local" id="fine" name="fine">
      </div>
      <div>
        <div class="col-6">
          <button  type="submit">
            Cerca
          </button>
        </div>
      </div>
    </form>

    <h1>CHIUDI NOLEGGIO</h1>

    <form method="POST" action="/chiudiNoleggio">
      <label for="username">Username cliente</label>
      <input  type="text" id="username" name="username">
      <br>
      <label for="mezzo">Mezzo </label>
      <input  type="text" id="mezzo" name="mezzo">
      <br>
      <label for="inizio">Inizio del noleggio </label>
      <input type="datetime-local" id="inizio" name="inizio">
      <br>
      <label for="fine">Fine del noleggio </label>
      <input type="datetime-local" id="fine" name="fine">
      <br>
      <button type="submit">Termina</button>
    </form>

    <p><a href="javascript:history.back()">Go back</a></p>

    <script type="text/javascript">



      function valida() {
        var inizio= document.prova.start.value;
        var annoinit = document.prova.start.value.substring(0,4);
        var meseinit = document.prova.start.value.substring(5,7)-1;
        var giornoinit = document.prova.start.value.substring(8,10);
        var orainit = document.prova.start.value.substring(11,13);
        var minutinit = document.prova.start.value.substring(14,16);
        var fine=document.prova.end.value;
        var annoend = document.prova.end.value.substring(0,4);
        var meseend = document.prova.end.value.substring(5,7)-1;
        var giornoend= document.prova.end.value.substring(8,10);
        var oraend = document.prova.end.value.substring(11,13);
        var minutend = document.prova.end.value.substring(14,16);
        var startdate= new Date(annoinit,meseinit,giornoinit,orainit,minutinit);
        var enddate = new Date(annoend, meseend, giornoend, oraend, minutend);
        console.log(startdate);
        console.log(enddate);
        var diff =  (enddate - startdate)/3600/1000;
       //la differenza non si riesce a mettere nel database dato che non fa parte del form
        console.log(diff);

        if(startdate > enddate){

          alert("La data di inizio noleggio deve essere precedente rispetto alla data di fine noleggio");

          return false;

        }
         else {
          console.log("Ciao a tutti amore miei");

          document.prova.submit();
        }
      }

    </script>
  </body>
</html>
